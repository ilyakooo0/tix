∀ ζ η θ ι κ λ.
( (ζ) // ({foo = String;}) ~ (η),
  θ.lib = ζ,
  ζ.mkOption = {default = {}; type = ι;} -> κ,
  ζ.submoduleWith =
    { modules =
        ∀ β γ δ ε.
        (β.lib = γ, γ.foo = δ, γ.mkOption = {default = δ;} -> ε) => [ ( β ->
            {options = {foo = ε;};}
          )
        ];
      specialArgs = {lib = ∀ α. α;};
    } ->
    ι,
  λ.types = ζ
) =>
θ -> {options = {submodule = κ;};}